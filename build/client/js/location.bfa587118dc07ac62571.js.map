{"version":3,"sources":["webpack:///./client/js/lib/google/index.js","webpack:///./client/js/lib/google/apis.js","webpack:///./client/js/lib/google/autocomplete.js","webpack:///./client/views/location/controllers/APIController/index.js","webpack:///./client/views/location/controllers/UIController/index.js","webpack:///./client/views/location/state.js","webpack:///./client/views/location/controllers/UIController/DOM.js","webpack:///./client/views/location/components/Place.js","webpack:///./client/views/location/controllers/UIController/Places.js","webpack:///./client/views/location/location.js","webpack:///./client/assets/placeholder-img.png"],"names":["default","autocomplete","google","maps","places","AutocompleteService","getPredictions","types","text","Promise","resolve","reject","getPlacePredictions","input","data","results","map","name","place","description","id","place_id","cities","bind","addresses"],"mappings":";;;;;;;;;;;;;;;;;;iDAASA,O;;;;;;;;;;;;;;;;ACAT;AACA,IAAMC,eAAe,IAAIC,OAAOC,IAAP,CAAYC,MAAZ,CAAmBC,mBAAvB,EAArB;;QAESJ,Y,GAAAA,Y,EAAgB,sB;;;;;;;;;;;;;ACHzB;;AAEA,SAASK,cAAT,CAAwBC,KAAxB,EAA+BC,IAA/B,EAAqC;AACnC,SAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,uBAAaC,mBAAb,CAAiC;AAC/BC,aAAOL,IADwB;AAE/BD,aAAOA;AAFwB,KAAjC,EAGG,UAACO,IAAD,EAAU;AACX,UAAIA,SAAS,IAAb,EAAmB;AACjB,YAAMC,UAAUD,KAAKE,GAAL,CAAS;AAAA,iBAAU;AACjCC,kBAAMC,MAAMC,WADqB;AAEjCC,gBAAIF,MAAMG;AAFuB,WAAV;AAAA,SAAT,CAAhB;AAIAX,gBAAQK,OAAR;AACD,OAND,MAMO;AACLJ;AACD;AACF,KAbD;AAcD,GAfM,CAAP;AAgBD;;kBAEc;AACbW,UAAQhB,eAAeiB,IAAf,CAAoB,IAApB,EAA0B,CAAC,UAAD,CAA1B,CADK;AAEbC,aAAWlB,eAAeiB,IAAf,CAAoB,IAApB,EAA0B,CAAC,SAAD,CAA1B;AAFE,C;;;;;;;ACrBf;AAAA;AAAA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,2BAA2B;AACxC,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;;AAEA,sBAAsB,oBAAoB;AAC1C;AACA;AACA,aAAa,2CAA2C;AACxD;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;ACrCA;AACA;;AAKA;;;;;;;;ACNA;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;ACPA;AAAA;AACA;AACA;AACA;AACc;AACd;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oGAAsC,oBAAoB;AAC1D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,qDAAqD,QAAQ;AAC7D;AACA;AACA,wBAAwB,wBAA+B;AACvD;;AAEA;AACA,sCAAsC,gBAAgB;;AAEtD,0BAA0B,uBAAuB;AACjD;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,2CAA2C,4FAAyB;AACpE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kBAAkB,+FAA4B;AAC9C;AACA;AACA;AACA,kBAAkB,+FAA4B;AAC9C;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB,YAAY;AAChC;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;;;;;AC1KA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACvCA;AAAA;AACA;AACgB;AAChB;AACsC;AACtC;AACsB;AACtB;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;;;;;;;;;;;;;;AC3DA,iCAAiC,owD","file":"js/location.bfa587118dc07ac62571.js","sourcesContent":["export { default as autocomplete } from './autocomplete'; // eslint-disable-line\n\n\n\n// WEBPACK FOOTER //\n// ./client/js/lib/google/index.js","/* global google document */\nconst autocomplete = new google.maps.places.AutocompleteService();\n\nexport { autocomplete }; // eslint-disable-line\n\n\n\n// WEBPACK FOOTER //\n// ./client/js/lib/google/apis.js","import { autocomplete } from './apis';\n\nfunction getPredictions(types, text) {\n  return new Promise((resolve, reject) => {\n    autocomplete.getPlacePredictions({\n      input: text,\n      types: types,\n    }, (data) => {\n      if (data !== null) {\n        const results = data.map(place => ({\n          name: place.description,\n          id: place.place_id,\n        }));\n        resolve(results);\n      } else {\n        reject();\n      }\n    });\n  });\n}\n\nexport default {\n  cities: getPredictions.bind(null, ['(cities)']),\n  addresses: getPredictions.bind(null, ['geocode']),\n};\n\n\n\n// WEBPACK FOOTER //\n// ./client/js/lib/google/autocomplete.js","/* global window */\nimport $ from 'jquery';\n\nconst path = window.location.pathname.split('/');\nconst LOCATION_ID = path[path.length - 1];\nconst API_ENDPOINT = '/places';\n\nfunction findPlaces() {\n  return new Promise((resolve, reject) => {\n    $.ajax(API_ENDPOINT, {\n      data: { location_id: LOCATION_ID },\n    })\n    .done(res => resolve(res))\n    .fail((xhr) => {\n      const message = JSON.parse(xhr.responseText).message;\n      reject(message);\n    });\n  });\n}\n\nfunction createPlace({ name, description }) {\n  return new Promise((resolve, reject) => {\n    $.ajax(API_ENDPOINT, {\n      data: { name, description, location: LOCATION_ID },\n      method: 'POST',\n    })\n    .done(res => resolve(res))\n    .fail((xhr) => {\n      const message = JSON.parse(xhr.responseText).message;\n      reject(message);\n    });\n  });\n}\n\nexport default {\n  findPlaces,\n  createPlace,\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/views/location/controllers/APIController/index.js\n// module id = 5\n// module chunks = 0","import DOM from './DOM';\nimport Places from './Places';\n\nexport {\n  DOM,\n  Places,\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/views/location/controllers/UIController/index.js\n// module id = 6\n// module chunks = 0","export default {};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/views/location/state.js\n// module id = 7\n// module chunks = 0","export default {\n  progress: '.progress',\n  placeAddBtn: '.place__add-btn',\n  placeCancelBtn: '.place__cancel-btn',\n  placeCreateBtn: '.place__create-btn',\n  places: '.place__results',\n  place: '.place__item',\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/views/location/controllers/UIController/DOM.js\n// module id = 8\n// module chunks = 0","/* global google */\n/* eslint global-require: 0, import/no-extraneous-dependencies: 0, import/no-unresolved: 0 */\n/* eslint comma-dangle: [\"error\", \"ignore\"] */\nimport $ from 'jquery';\nimport { DOM } from '../controllers/UIController';\nimport APIController from '../controllers/APIController';\n\nexport default class Place {\n  constructor(place, id) {\n    this.id = id;\n    if (!place) {\n      this.place = {\n        name: 'Lorem ipsum dolor',\n        description: `\n        Lorem ipsum dolor sit amet\n        Fusce eu nibh accumsan\n        Integer eget diam tempor\n        Praesent a lacus eu metus`,\n      };\n      this.$element = this.createElement();\n      this.addOverlay();\n    } else {\n      this.place = place;\n      this.$element = this.createElement();\n      // this.createRating();\n      this.map = null;\n      this.marker = null;\n    }\n  }\n\n  createPlace() {\n    const name = this.$element.find('#name').val();\n    const description = this.$element.find('#description').val();\n    return APIController.createPlace({ name, description });\n  }\n\n  createMap() {\n    if (!this.map) {\n      const coords = new google.maps.LatLng(\n        this.place.coords.lat,\n        this.place.coords.lng // eslint-disable-line\n      );\n      const map = new google.maps.Map(this.$element.find('.map').get(0), {\n        zoom: 15,\n        center: coords,\n      });\n      const marker = new google.maps.Marker({\n        position: coords,\n        map,\n      });\n      this.map = map;\n      this.marker = marker;\n\n      google.maps.event.addListener(map, 'idle', () => {\n        map.setCenter(coords);\n      });\n    }\n  }\n\n  createRating() {\n    const currentRating = this.$element.find(DOM.placeRating).data('current-rating');\n    this.$element.find(DOM.placeRating).barrating('show', {\n      theme: 'fontawesome-stars-o',\n      showSelectedRating: false,\n      initialRating: currentRating / 2,\n      readonly: true,\n    });\n  }\n\n  createElement() {\n    const html = `\n      <div class=\"place__item col s12 m6\" data-id=\"${this.id}\">\n        <div class=\"card\">\n          <div class=\"card-image\">\n            <img src=\"${require('placeholder-img.png')}\">\n          </div>\n\n          <div class=\"card-content\">\n            <div class=\"card-title\">${this.place.name}</div>\n\n            <blockquote>${this.place.description}</blockquote>\n          </div>\n\n          <div class=\"card-action\"></div>\n        </div>\n      </div>\n    `;\n\n    return $(html);\n  }\n\n  addOverlay() {\n    this.$element.find('.card').append(`\n      <div class=\"card__overlay\">\n        <a class=\"btn-floating btn-large ${DOM.placeAddBtn.slice(1)}\">\n          <i class=\"material-icons\">add</i>\n        </a>\n      </div>\n    `);\n  }\n\n  toForm() {\n    this.$element.find('.card-title').replaceWith(`\n      <div class=\"input-field card-title\">\n        <input id=\"name\" type=\"text\">\n        <label for=\"name\">Name</label>\n      </div>\n      <ul class=\"autocomplete-content dropdown-content\"></ul>\n    `);\n\n    this.$element.find('blockquote').replaceWith(`\n      <div class=\"input-field\">\n        <blockquote>\n          <textarea id=\"description\" class=\"materialize-textarea\"></textarea>\n          <label for=\"description\">Description</label>\n        </blockquote>\n      </div>\n    `);\n\n    this.$element.find('.card-action').append(`\n      <a class=\"${DOM.placeCancelBtn.slice(1)} btn-floating btn-large waves-effect waves-light red\">\n        <i class=\"material-icons\">close</i>\n      </a>\n    `, `\n      <a class=\"${DOM.placeCreateBtn.slice(1)} btn-floating btn-large right waves-effect waves-light green accent-3\">\n        <i class=\"material-icons\">check</i>\n      </a>\n    `);\n\n    this.$element.find('.card__overlay').hide();\n  }\n\n  displayResults(results) {\n    const $searchResults = this.$element.find('.autocomplete-content');\n    $searchResults.empty();\n\n    results.forEach((result) => {\n      $searchResults.append(`\n        <li><span>${result.name}</span></li>`\n      );\n    });\n\n    $searchResults.show();\n  }\n\n  hideResults() {\n    this.$element.find('.autocomplete-content').hide();\n  }\n\n  clearResults() {\n    this.$element.find('.autocomplete-content').empty();\n  }\n\n  cancelForm() {\n    this.$element.find('.card-title').replaceWith(`\n      <div class=\"card-title\">Lorem ipsum dolor</div>\n    `);\n\n    this.$element.find('blockquote').parents('.input-field').replaceWith(`\n      <blockquote>\n        Lorem ipsum dolor sit amet\n        Fusce eu nibh accumsan\n        Integer eget diam tempor\n        Praesent a lacus eu metus\n      </blockquote>\n    `);\n\n    this.$element.find('.card-action').empty();\n    this.$element.find('.card__overlay').show();\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/views/location/components/Place.js\n// module id = 17\n// module chunks = 0","import $ from 'jquery';\nimport DOM from './DOM';\nimport Place from '../../components/Place';\nimport state from '../../state';\n\nfunction hideProgress() {\n  $(DOM.progress).hide();\n}\n\nfunction appendPlace(place, id) {\n  if (id % 2 === 0) {\n    const $newRow = $('<div class=\"row\"></div>');\n    $newRow.append(place.$element);\n    $(DOM.places).append($newRow);\n  } else {\n    $(DOM.places).find('.row').last().append(place.$element);\n  }\n}\n\nfunction display(places) {\n  places.unshift(null);\n  if (places.length === 0) {\n    // show no places\n  }\n  state.places = places.map((place, i) => new Place(place, i));\n  state.places.forEach(appendPlace);\n}\n\nfunction add(place) {\n  const id = state.places.length;\n  const newPlace = new Place(place, id);\n  state.places.push(newPlace);\n  appendPlace(newPlace, id);\n}\n\nexport default {\n  hideProgress,\n  display,\n  add,\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/views/location/controllers/UIController/Places.js\n// module id = 18\n// module chunks = 0","/* global google document */\n/* eslint func-names: 0 */\nimport 'styles'; // eslint-disable-line\nimport $ from 'jquery';\nimport { autocomplete } from 'google'; // eslint-disable-line\nimport APIController from './controllers/APIController';\nimport { DOM, Places } from './controllers/UIController';\nimport state from './state';\n\nfunction setupEventListeners() {\n  $(DOM.places).on('click', DOM.placeAddBtn, function () {\n    const $place = $(this).parents(DOM.place);\n    const id = $place.data('id');\n    state.places[id].toForm();\n  });\n\n  $(DOM.places).on('click', DOM.placeCancelBtn, function () {\n    const $place = $(this).parents(DOM.place);\n    const id = $place.data('id');\n    state.places[id].cancelForm();\n  });\n\n  $(DOM.places).on('click', DOM.placeCreateBtn, function () {\n    const $place = $(this).parents(DOM.place);\n    const id = $place.data('id');\n    state.places[id].createPlace()\n      .then((place) => {\n        state.places[id].cancelForm();\n        Places.add(place);\n      })\n      .catch(err => console.log(err));\n  });\n\n  $(DOM.places).on('keyup', '#name', function () {\n    const value = $(this).val();\n    const id = $(this).parents(DOM.place).data('id');\n    const place = state.places[id];\n\n    if (value === '') {\n      place.hideResults();\n    } else {\n      place.clearResults();\n      autocomplete.addresses(value)\n      .then(res => place.displayResults(res))\n      .catch(() => place.hideResults());\n    }\n  });\n}\n\nfunction init() {\n  setupEventListeners();\n  APIController.findPlaces()\n    .then((places) => {\n      Places.hideProgress();\n      Places.display(places || []);\n    })\n    .catch(err => console.log(err));\n}\n\n$(init);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/views/location/location.js\n// module id = 19\n// module chunks = 0","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAvcAAAH0CAMAAACO3fK6AAAAn1BMVEX////T09PNzc339/f+/v7MzMzOzs7Ly8vn5+fR0dH5+fn9/f3V1dXu7u7X19fc3NzS0tLq6ura2tr4+PjY2Njt7e3p6en8/PzPz8/Z2dnm5ubW1tbh4eH7+/vQ0NDi4uLl5eXd3d3j4+Px8fHw8PDz8/Pb29vk5OT09PT6+vr19fXf39/29vbs7Ozo6Ojy8vLr6+vg4ODe3t7U1NTv7+/lc22AAAAEWElEQVR42u3dWW/iSBSA0YbYrrBDEggEsm+9bzP//7dNt1ojjWYmYFtqq6pyzlsefB+uPkUmwa43bwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPil2PsjAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkKPTszK8rJweWREZ2oT9plZEhgYHuh9YEboH3YPuQfege4jC6GF1/FN1oPvquKXVw8iWiUtx3A+/Xf+isGliyn4WOjETPhG5CR25sWuiMSy76r4c2jaxeA6debZtYrHtrvutbROLqrvu17ZNLEKHbBvdg+4h6u4Hm93F58Xq4vpkrnteRff926///CP85eTbWvdk3n1vcf6fy4s/z3RPxt33Ji9MeDzTPZl2v/f7lMsr3ZNj9+P9r865PNE9+XV/e/CxkQvdk1v3dzXmfC11T1bd39UaNCl1T0bdf685aaF78un+rPbzgde6J5fur97VHlVsdU8m3U8azDrq654sun9qNOxZ9+TQfdnsqIfRQPdk0P2HhtNWuieD7j82nDZa657ku29+sM+d7km++0XjcR91T/LdXzaf19M9iXc/bjHvWvck3v11i3kT3ZN4959azDvVPYl3/7bNwL7uSbv7yzYDe7on7e5bDZzqnqS7r1oNPNE9utc9iXXf1z2v8f6+1QmEW92TdvetDmIb6J60u79vMW/k/1Yk3v2qxbz3uifx7m9bzFvonsS7v2ox71b3JN59eN94XFHpntS7v2s87sHzViTf/aDxuJnuSb77Rm9L++m01D3pd9/0ScMP3p9DBt2HZaNhR6XuyaH7wXmTYRvvxySL7sOuwaxP3gNOJt2Hh/p3OZXuyaX79WnNSedj552QTfdhXu/Ek+LwseW2TTrdhz/qhF/MnONJVt2H3uFbndHGuc1k1n24+nLoI+046J7cug/lzd5nbZdV0D35df/jXuflX/lHm5ozbJvUug/h6f9flznclUH3ZNt9CNPFv7+1UEyeyvrX2zYpdv/jPn96c//320XO334+qRpdbduk2f2v96jNx9vxfN38QtsmFmXojm0Ti0F32Q9sm1jMuut+ZtvEYtld90vbJhZFr6vse4VtE43Hjj7Zlo92TUTuqy6yr+5tmqgMd/Pf/Du/nO+G9gwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC8On8BNxSx67AIOEUAAAAASUVORK5CYII=\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/assets/placeholder-img.png\n// module id = 27\n// module chunks = 0"],"sourceRoot":""}